<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="matsim">
<title>Introduction to MATSim R Library: analyzing transport simulations • matsim</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to MATSim R Library: analyzing transport simulations">
<meta property="og:description" content="matsim">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">matsim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Exampleproject.html">Example project</a>
    <a class="dropdown-item" href="../articles/Introduction.html">Introduction to MATSim R Library: analyzing transport simulations</a>
    <a class="dropdown-item" href="../articles/Namings.html">Namings</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/matsim-vsp/matsim-r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to MATSim R Library: analyzing transport simulations</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/matsim-vsp/matsim-r/blob/HEAD/vignettes/Introduction.Rmd" class="external-link"><code>vignettes/Introduction.Rmd</code></a></small>
      <div class="d-none name"><code>Introduction.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/matsim-vsp/matsim-r" class="external-link">matsim</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h4>
<p>Welcome to the MATSim R package! MATSim R is an R package designed
for data processing and visualization and provides a wide range of
functions to create adjustable plots from processed data. This vignette
will give you an overview of the structure of the package and quickly
guide you through the process of creating plots using the functions
provided by the library.</p>
</div>
<div class="section level4">
<h4 id="overall-concept">Overall concept<a class="anchor" aria-label="anchor" href="#overall-concept"></a>
</h4>
<p>The purpose of this package is to provide a comprehensive set of
tools to efficiently analyze the output of MATSim runs. The package
primarily processes output data stored in CSV and XML files, especially
the so called “output_trips”, “legs” and “persons” files. By adhering to
this standardized naming convention, the package offers a streamlined
functionality for reading, processing, plotting and YAML file creation
for use in Simwrapper. XXXX LINK TO SIMWRAPPER GITHUB xxxx</p>
<div class="figure">
<img src="dataflow.png" alt=""><p class="caption">Data flow and concept of matsim r package</p>
</div>
<p>The package is organized into four categories, each serving a
specific purpose:</p>
<p><strong>Reading Functions</strong>: These functions begin with the
prefix “read_” and are designed to read and import the simulation
output. Field types are automatically set and a tibble is created.</p>
<p><strong>Processing Functions</strong>: Functions with the prefix
“process_” form the core of the package’s data manipulation
capabilities. Users can apply a variety of transformations and
calculations to the loaded tibbles, allowing for advanced processing and
analysis tailored to their specific needs. Spatial input/output is also
supported, enabling users to manipulate and analyze the data on a
spatial level as well.</p>
<p><strong>Plotting Functions</strong>: The plotting functions with the
prefix “plot_” enable users to create visualizations based on the
processed output data. These functions offer a range of plotting
options, allowing users to explore patterns, trends, and relationships
within the simulation results. The plotting functions encompass two
additional subcategories, namely <strong><em>mapping</em></strong> and
<strong><em>comparing</em></strong>. Within the mapping subcategory,
users can generate visualizations that overlay simulation results onto
geographical maps, providing insights into spatial patterns and
distributions. The comparing subcategory offers tools to compare
different simulation outputs, allowing analysis and understanding of
variations between scenarios or data sets.</p>
<p><strong>Simwrapper</strong>: The simwrapper category is a specialized
group within the package that facilitates plotting using YAML files in
Simwrapper. This feature allows users to define complex plots and
visualizations in the YAML format, providing a convenient and efficient
way to generate custom visual representations of their simulation
data.</p>
<p>With this structure MATSim R aims to simplify the analysis of MATSim
runs. It provides users with an intuitive workflow, from reading and
processing the simulation output to generating informative plots and
leveraging the power of YAML-based configurations.</p>
</div>
<div class="section level4">
<h4 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h4>
<p>MATSim R is not yet available at CRAN, so to install MATSim R using
github, you can use the following code:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"matsim-vsp/matsim-r"</span><span class="op">)</span></span></code></pre></div>
<p>However if you want to use a specific branch it can be specified like
so:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"matsim-vsp/matsim-r"</span>, ref <span class="op">=</span> <span class="st">"{name of the branch}"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="loading-the-package">Loading the package<a class="anchor" aria-label="anchor" href="#loading-the-package"></a>
</h4>
<p>Once installed, you can load the MATSim R package using the library()
function:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/matsim-vsp/matsim-r" class="external-link">matsim</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="loading-data">Loading Data<a class="anchor" aria-label="anchor" href="#loading-data"></a>
</h4>
<p>The first step in analyzing your transport simulations is to load the
output data into your R environment. MATSim provides several functions
with the “read_” prefix for this purpose. Let’s take a look at how you
can load your simulation output stored in a CSV file:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specify the file path to your simulation output. </span></span>
<span><span class="co"># It can be a directory path or direct path to a file</span></span>
<span><span class="va">output_file</span> <span class="op">&lt;-</span> <span class="st">"path/to/your/output_trips.csv"</span></span>
<span></span>
<span><span class="co"># Use the read_csv_trips() function to read the simulation data</span></span>
<span><span class="va">trips_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_output_trips.html">read_output_trips</a></span><span class="op">(</span><span class="va">output_file</span><span class="op">)</span></span></code></pre></div>
<p>You can now proceed to explore and analyze the loaded data.</p>
</div>
<div class="section level4">
<h4 id="data-processing">Data Processing<a class="anchor" aria-label="anchor" href="#data-processing"></a>
</h4>
<p>MATSim R offers a range of processing functions, prefixed with
“process_”, to manipulate and transform your simulation data. These
functions allow you to perform various operations, such as filtering,
aggregating, and calculating additional metrics. Let’s see an example of
applying a transformation to our loaded data:
<!-- XXXX IS THE EXAMPLE
CORRECT? - filter by shape?? XXXX -->
</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate the average trip duration</span></span>
<span><span class="va">average_duration</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_get_travelwaittime_by_mainmode.html">process_get_travelwaittime_by_mainmode</a></span><span class="op">(</span><span class="va">weekday_trips</span><span class="op">)</span></span></code></pre></div>
<p>Feel free to explore the different processing functions available in
the package to suit your specific analysis requirements.</p>
</div>
<div class="section level4">
<h4 id="plotting">Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a>
</h4>
<p>Visualizing your simulation data is crucial for gaining insights and
effectively communicating your findings. MATSim R provides a wide range
of plotting functions to help you create informative visualizations.
Let’s create a scatter plot to visualize the relationship between trip
distance and trip duration:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a scatter plot of trip distance among different main modes</span></span>
<span><span class="fu"><a href="../reference/plot_distance_by_mainmode_barchart.html">plot_distance_by_mainmode_barchart</a></span><span class="op">(</span><span class="va">trips_data</span>, x <span class="op">=</span> <span class="st">"distance"</span>, y <span class="op">=</span> <span class="st">"duration"</span><span class="op">)</span></span></code></pre></div>
<p>You can customize the plot appearance and explore other plot types,
such as line plots, bar charts, and spatial maps, using the various
plotting functions provided by MATSim R.</p>
</div>
<div class="section level4">
<h4 id="advanced-features-still-in-development">Advanced Features (still in development)<a class="anchor" aria-label="anchor" href="#advanced-features-still-in-development"></a>
</h4>
<ul>
<li>still in development -</li>
</ul>
</div>
<div class="section level4">
<h4 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h4>
<p>In this vignette, we introduced you to the MATSim R package, designed
specifically for analyzing MATSim outputs. We hope that you’ll have a
great experience using this library and we are glad to receive feedback
at <strong><a href="https://github.com/matsim-vsp/matsim-r/tree/master" class="external-link uri">https://github.com/matsim-vsp/matsim-r/tree/master</a></strong>
or at mail <strong><a href="mailto:soboliev@vsp.tu-berlin.de" class="email">soboliev@vsp.tu-berlin.de</a></strong></p>
<p>For more details and specific usage examples, refer to the package
documentation and other vignettes available. Happy analyzing with MATSim
R!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Billy Charlton, Oleksandr Soboliev.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
